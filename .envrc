# CALIBER Development Environment
# Auto-load environment variables via direnv

# Load .env file
dotenv

# Ensure PostgreSQL is running (WSL only)
if command -v systemctl &> /dev/null && [[ "$(uname -r)" == *microsoft* ]]; then
    if ! pgrep -x "postgres" > /dev/null; then
        echo "Starting PostgreSQL..."
        sudo service postgresql start 2>/dev/null || true
    fi
fi

# Show status
echo "CALIBER dev environment loaded"
echo "  DB: ${CALIBER_DB_USER:-caliber}@${CALIBER_DB_HOST:-localhost}:${CALIBER_DB_PORT:-5432}/${CALIBER_DB_NAME:-caliber}"
echo "  API: http://localhost:${CALIBER_API_PORT:-3000}"
